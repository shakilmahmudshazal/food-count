(this.webpackJsonpfoodcount_pwa=this.webpackJsonpfoodcount_pwa||[]).push([[0],{269:function(e,t,a){e.exports=a(507)},408:function(e,t,a){},505:function(e,t,a){},507:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),c=a.n(o),s=a(13),i=a(10),u=a(257),l=a.n(u),m=a(22),d=(a(98),a(86));d.initializeApp({apiKey:"AIzaSyCzFkfDGy0EfakSGY64GnvFhnHEqS_jW8c",authDomain:"foodcount-7d19e.firebaseapp.com",databaseURL:"https://foodcount-7d19e-default-rtdb.firebaseio.com",projectId:"foodcount-7d19e",storageBucket:"foodcount-7d19e.appspot.com",messagingSenderId:"740771838193",appId:"1:740771838193:web:cdb175252d422067559150",measurementId:"G-F3PRBGZN2M"});var p=d.database(),h=d.storage(),f=new d.auth.GoogleAuthProvider,b=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,n){return(a[e]<n[e]?-1:a[e]>n[e]?1:0)*t}},y=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(){return function(e,t){t().auth.uid;return p.ref("users").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(v({id:e.key},e.val()))})),e(function(e){return{type:"SET_USERS",users:e}}(a.sort(b("name"))))}))}},g=function(e){return function(t,a){var n=a().auth.uid;return p.ref("users/".concat(n)).update(e).then((function(){t(function(e,t){return{type:"EDIT_USER",id:e,updates:t}}(n,e))}))}},j=Object(s.b)((function(e,t){return{user:e.users.find((function(t){return t.id===e.auth.uid})),auth:e.auth}}),(function(e){return{startEditUser:function(t){return e(g(t))},startSetUsers:function(){return e(O())}}}))((function(e){return function(){if(!e.user){var t={name:e.auth.name};e.startEditUser(t),e.startSetUsers()}}(),r.a.createElement("div",null,e.user&&r.a.createElement("div",{className:"dashboard-btn"},1==e.user.admin&&r.a.createElement("button",{className:"buttonAdmin",onClick:function(){$e.push("/admin")}}," Admin "),r.a.createElement("button",{className:"buttonUser",onClick:function(){$e.push("/user")}}," Buy")),r.a.createElement("button",{className:"buttonProfile",onClick:function(){$e.push("/addUser")}}," Manage Profile"))})),P=a(23),N=a(24),S=a(26),_=a(25),w=a(27),k=a(258),C=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(S.a)(this,Object(_.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onImageChange=function(e){var t=e.target.value;a.setState((function(){return{image:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{amount:t}}))},a.setFile=function(e){a.setState({file:e})},a.handleImageChange=function(e){a.setFile(e.target.files[0])},a.onSubmit=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.state.file,n=h.ref("/images/".concat(t.name));n.put(t).on("state_changed",console.log,console.error,(function(){n.getDownloadURL().then((function(e){a.setFile(null),a.setState({image:e}),a.state.name&&a.state.amount?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name,amount:a.state.amount,image:a.state.image?a.state.image:""})):a.setState((function(){return{error:"Please provide name and amount."}}))}))}))},a.state={name:e.product?e.product.name:"",image:e.product?e.product.image:"",amount:e.product?e.product.amount.toString():"",error:"",file:null,loading:!1},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.loading&&r.a.createElement("div",{size:"middle"},r.a.createElement(k.a,{size:"large"})),",",this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:this.state.name,onChange:this.onNameChange}),r.a.createElement("input",{type:"text",placeholder:"Amount",className:"text-input",value:this.state.amount,onChange:this.onAmountChange}),r.a.createElement("input",{type:"file",onChange:this.handleImageChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button"},"Save Product"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),D=Object(i.f)(C);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){return{type:"ADD_PRODUCT",product:e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_PRODUCT",id:t}},R=function(){return function(e,t){t().auth.uid;return p.ref("products").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(U({id:e.key},e.val()))})),e(function(e){return{type:"SET_PRODUCTS",products:e}}(a.sort(b("name"))))}))}},I=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startAddProduct(e),a.props.history.push("/admin")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Add Product"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(D,{onSubmit:this.onSubmit})))}}]),t}(r.a.Component),x=Object(s.b)(void 0,(function(e){return{startAddProduct:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,a){a().auth.uid;var n=e.name,r=void 0===n?"":n,o=e.amount,c=void 0===o?0:o,s=e.image,i={name:r,amount:c,image:void 0===s?"":s};return p.ref("products").push(i).then((function(e){t(T(U({id:e.key},i)))}))}}(t))}}}))(I),M=a(54),B=a(9),Y=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(S.a)(this,Object(_.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onSubmit=function(e){e.preventDefault(),a.state.name?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name})):a.setState((function(){return{error:"Please provide name ."}}))},a.state={name:e.user?e.user.name:"",error:""},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",className:"text-input",value:this.state.name,onChange:this.onNameChange}),r.a.createElement("div",null,r.a.createElement(M.a,{type:"danger",onClick:function(){e.props.history.goBack()}}," ",r.a.createElement(B.a,{type:"left"}),"Back")," ",r.a.createElement(M.a,{type:"primary",htmlType:"submit"},"Save")))}}]),t}(r.a.Component),W=Object(i.f)(Y),L=a(21),F=a.n(L),G=a(512),q=a(88),z=a(47),$=a(510),J=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditUser(e),a.props.startSetUsers(),G.a.success("Profile has been updated successfully")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;this.props.auth;return r.a.createElement("div",null,r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Profile"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(W,{user:this.props.existingUser,onSubmit:this.onSubmit})),r.a.createElement("div",{className:"show-for-desktop",style:{background:"#ECECEC",padding:"30px"}},r.a.createElement(q.a,{gutter:16},r.a.createElement(z.a,{span:8},r.a.createElement($.a,{title:"Total Cost",bordered:!1},"\u09f3",F()(this.props.existingUser.amount).format("0,0.00"))),r.a.createElement(z.a,{span:8},r.a.createElement($.a,{title:"Total Paid",bordered:!1},"\u09f3",F()(this.props.existingUser.paid).format("0,0.00"))),r.a.createElement(z.a,{span:8},r.a.createElement($.a,{title:"Total Due",bordered:!1},"\u09f3",F()(this.props.existingUser.amount-(this.props.existingUser.paid?this.props.existingUser.paid:0)).format("0,0.00"))))),r.a.createElement("div",{className:"show-for-mobile "},r.a.createElement("div",{className:" list-item-wallet"},r.a.createElement("h2",{className:"list-item__data"},"Total Cost: \u09f3",F()(this.props.existingUser.amount).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Total Paid: \u09f3",F()(this.props.existingUser.paid).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Total Due: \u09f3",F()(this.props.existingUser.amount-(this.props.existingUser.paid?this.props.existingUser.paid:0)).format("0,0.00")))),r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement("br",null),r.a.createElement(M.a,{type:"primary",onClick:function(){e.props.history.push("/userPaymentHistory/".concat(e.props.existingUser.id))}},"Payment History"),"  ",r.a.createElement(M.a,{type:"primary",onClick:function(){e.props.history.push("/userPurchaseHistory/".concat(e.props.existingUser.id))}},"Purchase History")),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement("br",null),r.a.createElement(q.a,{gutter:[40,24]},r.a.createElement(z.a,{span:12,offset:7},r.a.createElement(M.a,{type:"primary",onClick:function(){e.props.history.push("/userPaymentHistory/".concat(e.props.existingUser.id))}},"Payment History"),"  ",r.a.createElement(M.a,{type:"primary",onClick:function(){e.props.history.push("/userPurchaseHistory/".concat(e.props.existingUser.id))}},"Purchase History"))))))}}]),t}(r.a.Component),V=Object(s.b)((function(e,t){return{existingUser:e.users.find((function(t){return t.id===e.auth.uid})),auth:e.auth}}),(function(e){return{startEditUser:function(t){return e(g(t))},startSetUsers:function(){return e(O())}}}))(J),K=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditProduct(a.props.product.id,e),a.props.history.push("/admin")},a.onRemove=function(){a.props.startRemoveProduct({id:a.props.product.id}),a.props.history.push("/admin")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Edit Product"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(D,{product:this.props.product,onSubmit:this.onSubmit}),r.a.createElement("button",{className:"button button--secondary",onClick:this.onRemove},"Remove Product")))}}]),t}(r.a.Component),Q=Object(s.b)((function(e,t){return{product:e.products.find((function(e){return e.id===t.match.params.id}))}}),(function(e,t){return{startEditProduct:function(t,a){return e(function(e,t){return function(a,n){n().auth.uid;return p.ref("products/".concat(e)).update(t).then((function(){a(function(e,t){return{type:"EDIT_PRODUCT",id:e,updates:t}}(e,t))}))}}(t,a))},startRemoveProduct:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return function(e,a){a().auth.uid;return p.ref("products/".concat(t)).remove().then((function(){e(H({id:t}))}))}}(t))}}}))(K),X=function(){return r.a.createElement("div",null,"404 - ",r.a.createElement(i.a,{to:"/"},"Go home"))},Z=Object(s.b)(void 0,(function(e){return{startLogin:function(){return e((function(){return d.auth().signInWithPopup(f)}))}}}))((function(e){var t=e.startLogin;return r.a.createElement("div",{className:"box-layout"},r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"box-layout__title"},"Food Count"),r.a.createElement("p",null,"Let's Eat."),r.a.createElement("button",{className:"button",onClick:t},"Login with Google")))})),ee=a(133),te=(a(408),Object(s.b)(void 0,(function(e){return{startLogout:function(){return e((function(){return d.auth().signOut()}))}}}))((function(e){var t=e.startLogout;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"header__content"},r.a.createElement(i.a,{className:"header__title",to:"/dashboard"},r.a.createElement("h2",{className:"text-white h2 mb-0"},"Food Count")),r.a.createElement("button",{className:"button button--link",onClick:t},"Logout"))))}))),ae=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(ee.a)(e,["isAuthenticated","component"]);return r.a.createElement(i.c,Object.assign({},n,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(te,null),r.a.createElement(a,e)):r.a.createElement(i.b,{to:"/"})}}))})),ne=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(ee.a)(e,["isAuthenticated","component"]);return r.a.createElement(i.c,Object.assign({},n,{component:function(e){return t?r.a.createElement(i.b,{to:"/dashboard"}):r.a.createElement(a,e)}}))})),re=a(71),oe=a.n(re),ce=function(e){var t=e.id,a=e.name,n=e.amount;return r.a.createElement(i.a,{className:"list-item",to:"/edit/".concat(t)},r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item__title"},a)),r.a.createElement("h3",{className:"list-item__data"},"\u09f3",F()(n).format("0,0.00")))},se=Object(s.b)((function(e){return{products:e.products,name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Products"),r.a.createElement("div",{className:"show-for-desktop"},"Product"),r.a.createElement("div",{className:"show-for-desktop"},"Amount")),r.a.createElement("div",{className:"list-body"},0===e.products.length?r.a.createElement("div",{className:"list-item list-item--message"},r.a.createElement("span",null,"No products")):e.products.map((function(e){return r.a.createElement(ce,Object.assign({key:e.id},e))}))))})),ie=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header__actions"},r.a.createElement(i.a,{className:"button",to:"/create"},"Add Product"),r.a.createElement(i.a,{className:"button",to:"/manageWallet"},"Manage Wallet"),r.a.createElement(i.a,{className:"button",to:"/manageAdminWallet"},"Admin Wallet")),r.a.createElement(se,null),r.a.createElement("div",{className:"content-container"},r.a.createElement(M.a,{type:"danger",onClick:function(){e.history.goBack()}},r.a.createElement(B.a,{type:"left"}),"Back")))},ue=a(87);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de=function(e,t){return{type:"ADD_USER_PURCHASE_HISTORY",id:e,Purchase:t}},pe=a(511),he=$.a.Meta,fe=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(S.a)(this,Object(_.a)(t).call(this))).addCart=function(){a.setState((function(e,t){return{cart:e.cart+1}}))},a.removeCart=function(){a.state.cart>1&&a.setState((function(e,t){return{cart:e.cart-1}}))},a.addAmount=function(){var e=new Date,t=1*a.props.user.amount?1*a.props.user.amount:"0",n={amount:parseInt(t)+parseInt(a.props.amount)*a.state.cart};a.props.startEditUser(n),a.props.startAddUserPurchaseHistory(a.props.user.id,{name:a.props.name,amount:a.props.amount,quantity:a.state.cart,date:y(e)}),a.closeModal(),G.a.success("Product has been purchased successfully")},a.state={modalIsOpen:!1,cart:1},a.openModal=a.openModal.bind(Object(ue.a)(a)),a.afterOpenModal=a.afterOpenModal.bind(Object(ue.a)(a)),a.closeModal=a.closeModal.bind(Object(ue.a)(a)),a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){this.subtitle.style.color="#000"}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1}),this.state.cart&&this.setState((function(e,t){return{cart:1}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement(z.a,{span:24},r.a.createElement($.a,{bordered:!0,style:{height:300},cover:r.a.createElement("img",{alt:"example",src:this.props.image?this.props.image:"https://www.ukmarket.in/sites/default/files/styles/large/public/default_images/default-product.jpg?itok=Ptm5dtOz",height:"200"}),actions:[r.a.createElement("button",{style:{color:"red"},className:"list-item-button ",onClick:this.openModal}," ",r.a.createElement(B.a,{type:"shopping-cart"})," Buy Now ")]},r.a.createElement(he,{title:this.props.name,description:F()(this.props.amount).format("\u200e0,0.00")})))),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement(z.a,{span:8},r.a.createElement($.a,{bordered:!0,style:{height:300},cover:r.a.createElement("img",{alt:"example",src:this.props.image?this.props.image:"https://www.ukmarket.in/sites/default/files/styles/large/public/default_images/default-product.jpg?itok=Ptm5dtOz",height:"200"}),actions:[r.a.createElement("button",{style:{color:"red"},className:"list-item-button ",onClick:this.openModal}," ",r.a.createElement(B.a,{type:"shopping-cart"})," Buy Now ")]},r.a.createElement(he,{title:this.props.name,description:F()(this.props.amount).format("\u200e0,0.00")})))),r.a.createElement(pe.a,{title:"Buy this product",visible:this.state.modalIsOpen,onOk:this.addAmount,onCancel:this.closeModal,width:"80%",footer:!1},r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement("div",{className:"cart_subtitle"},r.a.createElement("h2",{ref:function(t){return e.subtitle=t}},this.props.name)),r.a.createElement("div",{className:"price-div"},"Price:",this.props.amount," bdt"),r.a.createElement("div",{className:"cost-div"},"Total Cost:",parseInt(this.props.amount)*this.state.cart," bdt"),r.a.createElement("div",{className:"quantity"},r.a.createElement("span",null,r.a.createElement("button",{className:"removeCart",onClick:this.removeCart},"-")),r.a.createElement("span",{className:"box-item"},this.state.cart),r.a.createElement("span",null,r.a.createElement("button",{className:"addCart",onClick:this.addCart},"+"))),r.a.createElement("br",null),r.a.createElement("button",{className:"cancelButton",onClick:this.closeModal},"close"),r.a.createElement("button",{className:"purchaseButton",disabled:this.state.cart<1,onClick:this.addAmount},"Purchase")),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement(q.a,{gutter:[40,24]},r.a.createElement(z.a,{span:8,offset:8},r.a.createElement($.a,{title:"Purchase"},r.a.createElement("div",{className:"cart_subtitle"},r.a.createElement("h2",{ref:function(t){return e.subtitle=t}},this.props.name)),r.a.createElement("div",{className:"price-div"},"Price:",this.props.amount," bdt"),r.a.createElement("div",{className:"cost-div"},"Total Cost:",parseInt(this.props.amount)*this.state.cart," bdt"),r.a.createElement("div",{className:"quantity"},r.a.createElement("span",null,r.a.createElement("button",{className:"removeCart",onClick:this.removeCart},"-")),r.a.createElement("span",{className:"box-item"},this.state.cart),r.a.createElement("span",null,r.a.createElement("button",{className:"addCart",onClick:this.addCart},"+"))),r.a.createElement("br",null)))),r.a.createElement(q.a,{gutter:[40,24]},r.a.createElement(z.a,{span:8,offset:10},r.a.createElement(M.a,{type:"danger",onClick:this.closeModal},"close")," "," ",r.a.createElement(M.a,{type:"primary",disabled:this.state.cart<1,onClick:this.addAmount},"Purchase"))))))}}]),t}(r.a.Component),be=Object(s.b)((function(e,t){return{user:e.users.find((function(t){return t.id===e.auth.uid}))}}),{startEditUser:g,startAddUserPurchaseHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var r=t.date,o=void 0===r?"":r,c=t.amount,s=void 0===c?0:c,i=t.name,u=void 0===i?"":i,l=t.quantity,m={date:o,amount:s,name:u,quantity:void 0===l?0:l};return p.ref("userPurchaseHistory/".concat(e)).push(m).then((function(e){a(de(me({},m)))}))}}})(fe),ye=Object(i.f)(Object(s.b)((function(e){return{products:e.products,user:e.users.find((function(t){return t.id===e.auth.uid})),name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Total Cost : ",(e.user.amount?e.user.amount:0)-(e.user.paid?e.user.paid:0)," "),r.a.createElement("div",{className:"show-for-desktop"},"Total Cost :"),r.a.createElement("div",{className:"show-for-desktop"},(e.user.amount?e.user.amount:0)-(e.user.paid?e.user.paid:0))),r.a.createElement("div",{className:"list-body"},r.a.createElement("br",null),0===e.products.length?r.a.createElement("div",{className:"list-item"},r.a.createElement("span",null,"No products")):r.a.createElement(q.a,{gutter:[40,24]},e.products.map((function(e){return r.a.createElement(be,Object.assign({key:e.id},e))}))),r.a.createElement(M.a,{type:"danger",onClick:function(){e.history.goBack()}},r.a.createElement(B.a,{type:"left"}),"Back")))}))),Ee=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header__actions"}),r.a.createElement(ye,null))},ve=function(e){var t=e.id,a=e.name,n=e.amount,o=e.paid;return r.a.createElement(i.a,{className:"list-item-user",to:"/pay/".concat(t)},r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item-user__title"},a)),r.a.createElement("h5",{className:"list-item-user__data"},"Total Cost: \u09f3",F()(n).format("0,0.00")),r.a.createElement("h5",{className:"list-item-user__data"},"Total Paid: \u09f3",F()(o).format("0,0.00")),r.a.createElement("h5",{className:"list-item-user__data"},"Total Due: \u09f3",F()(n-(o||0)).format("0,0.00")))},Oe=Object(s.b)((function(e){return{users:e.users,name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Users List ")),r.a.createElement("div",{className:"list-body"},0===e.users.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No User")):e.users.map((function(e){return r.a.createElement(ve,Object.assign({key:e.id},e))})),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back")))})),ge=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(S.a)(this,Object(_.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{newPaid:t}}))},a.onSubmit=function(e){e.preventDefault();var t=parseInt(a.state.paid)+parseInt(a.state.newPaid);a.state.newPaid?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name,amount:a.state.amount,paid:t},a.state.newPaid)):a.setState((function(){return{error:"Please provide amount."}}))},a.state={name:e.user?e.user.name:"",amount:e.user&&e.user.amount?e.user.amount.toString():0,paid:e.user&&e.user.paid?e.user.paid.toString():0,newPaid:"",error:""},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:this.state.name,onChange:this.onNameChange,disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:"Due: "+(parseInt(this.state.amount)-parseInt(this.state.paid))+" bdt",disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"type amount to pay",className:"text-input",value:this.state.newPaid,onChange:this.onAmountChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button-save"},"Proceed Payment"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),je=Object(i.f)(ge);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se=function(e){return{type:"ADD_USER_PAYMENT_HISTORY",payment:e}},_e=function(){return function(e,t){t().auth.uid;return p.ref("userPaymentHistory").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(Ne({id:e.key},e.val()))})),e({type:"SET_USER_PAYMENT_HISTORY",payment:a})}))}},we=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e,t){var n=new Date;a.props.startPay(a.props.user.id,e),a.props.startAdminAddAmount({cash:parseInt(a.props.admin.cash?a.props.admin.cash:0)+parseInt(t)}),a.props.startAddUserPaymentHistory(a.props.user.id,{date:y(n),amount:t}),a.props.startSetUserPaymentHistory(),G.a.success("Payment successful"),a.props.history.push("/manageWallet")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Payment Page "))),r.a.createElement("div",{className:"content-container"},r.a.createElement(je,{user:this.props.user,onSubmit:this.onSubmit}),r.a.createElement(i.a,{className:"button ",to:"/userPaymentHistory/".concat(this.props.user.id)},"Payment History"),r.a.createElement(i.a,{className:"button ",to:"/userPurchaseHistory/".concat(this.props.user.id)},"Purchase History")))}}]),t}(r.a.Component),ke=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),admin:e.admin}}),{startPay:function(e,t){return function(a,n){return p.ref("users/".concat(e)).update(t).then((function(){a(function(e,t){return{type:"PAY",id:e,updates:t}}(e,t))}))}},startAdminAddAmount:function(e){return function(t,a){return p.ref("admin/").update(e).then((function(){t(function(e){return{type:"ADD_AMOUNT_ADMIN",updates:e}}(e))}))}},startAddUserPaymentHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var r=t.date,o=void 0===r?"":r,c=t.amount,s={date:o,amount:void 0===c?0:c};return p.ref("userPaymentHistory/".concat(e)).push(s).then((function(e){a(Se(Ne({},s)))}))}},startSetUserPaymentHistory:_e})(we),Ce=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditUser(e),a.props.startSetUsers(),a.props.history.push("/dashboard")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Profile"))),r.a.createElement("div",{className:"list-item-wallet"},r.a.createElement("h2",{className:"list-item__data"},"Payment : \u09f3",F()(this.props.admin.cash).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Withdrawal: \u09f3",F()(this.props.admin.paid).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Cash: \u09f3",F()(this.props.admin.cash-(this.props.admin.paid?this.props.admin.paid:0)).format("0,0.00"))),r.a.createElement("div",null,r.a.createElement(i.a,{className:"button",to:"/payAdminWallet"},"Withdraw"),r.a.createElement(i.a,{className:"button",to:"/adminCashOutHistory"},"Withdrawal History"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),De=Object(s.b)((function(e,t){return{admin:e.admin}}),(function(e){return{}}))(Ce),Ae=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(S.a)(this,Object(_.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{newPaid:t}}))},a.onSubmit=function(e){e.preventDefault();var t=parseInt(a.props.admin.paid?a.props.admin.paid:0)+parseInt(a.state.newPaid);a.state.newPaid?(a.setState((function(){return{error:""}})),a.props.onSubmit({paid:t},a.state.newPaid)):a.setState((function(){return{error:"Please provide name and amount."}}))},a.state={cash:e.admin&&e.admin.cash?e.admin.cash.toString():0,paid:e.admin&&e.admin.paid?e.admin.paid.toString():0,newPaid:"",error:""},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:"Cash: "+(parseInt(this.props.admin.cash?this.props.admin.cash:0)-parseInt(this.props.admin.paid?this.props.admin.paid:0))+" bdt",disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"type amount to pay",className:"text-input",value:this.state.newPaid,onChange:this.onAmountChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button-save"},"Proceed Payment"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),Ue=Object(i.f)(Ae);function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=function(e){return{type:"ADD_HISTORY",payment:e}},Ie=function(){return function(e,t){t().auth.uid;return p.ref("adminHistory").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(He({id:e.key},e.val()))})),e({type:"SET_ADMIN_HISTORY",payment:a})}))}},xe=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e,t){var n=new Date;a.props.startAdminAddHistoryAmount({date:y(n),amount:t}),a.props.startAdminPay(e),a.props.startSetAdminHistory(),G.a.success("Withdrawn Successful"),a.props.history.push("/manageAdminWallet")},a}return Object(w.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Payment Page "))),r.a.createElement("div",{className:"content-container"},r.a.createElement(Ue,{admin:this.props.admin,onSubmit:this.onSubmit})))}}]),t}(r.a.Component),Me=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),admin:e.admin}}),{startAdminAddHistoryAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,a){var n=e.date,r=void 0===n?"":n,o=e.amount,c={date:r,amount:void 0===o?0:o};return p.ref("adminHistory").push(c).then((function(e){t(Re(He({},c)))}))}},startAdminPay:function(e){return function(t,a){return p.ref("admin/").update(e).then((function(){t(function(e){return{type:"PAY_ADMIN",updates:e}}(e))}))}},startSetAdminHistory:Ie})(xe),Be=function(e){e.id;var t=e.amount,a=e.date;return r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," ",a),r.a.createElement("h5",{className:"list-item__data"},"\u09f3",F()(t).format("0,0.00")))},Ye=Object(s.b)((function(e){return{adminHistory:e.adminHistory}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Date"),r.a.createElement("h5",{className:"list-item__data"},"Amount")),r.a.createElement("div",{className:"list-body scrollable"},0===e.adminHistory.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No History")):e.adminHistory.map((function(e){return r.a.createElement(Be,Object.assign({key:e.id},e))}))),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back"))})),We=function(e){e.id;var t=e.amount,a=e.date;return r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," ",a),r.a.createElement("h5",{className:"list-item__data"},"\u09f3",F()(t).format("0,0.00")))};function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Fe=Object(s.b)((function(e,t){return{currentUserHistory:e.currentUserHistory,id:t.match.params.id}}),{startSetCurrentUserPaymentHistory:function(e){return function(t,a){return p.ref("userPaymentHistory/".concat(e)).once("value").then((function(e){var a=[];e.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.key},e.val()))})),t({type:"SET_CURRENT_USER_PAYMENT_HISTORY",payment:a})}))}}})((function(e){return Object(n.useEffect)((function(){e.match.params.id&&e.startSetCurrentUserPaymentHistory(e.match.params.id)}),[e.match.params.id]),r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Date"),r.a.createElement("h5",{className:"list-item__data"},"Amount")),r.a.createElement("div",{className:"list-body"},0===e.currentUserHistory.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No History")):e.currentUserHistory.map((function(e){return r.a.createElement(We,Object.assign({key:e.id},e))})),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back")))}));function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var qe=a(509),ze=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),currentUserPurchaseHistory:e.currentUserPurchaseHistory,id:t.match.params.id}}),{startSetCurrentUserPurchaseHistory:function(e){return function(t,a){return p.ref("userPurchaseHistory/".concat(e)).once("value").then((function(e){var a=[];e.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.key},e.val()))})),t({type:"SET_CURRENT_USER_PURCHASE_HISTORY",purchase:a})}))}}})((function(e){Object(n.useEffect)((function(){e.match.params.id&&e.startSetCurrentUserPurchaseHistory(e.match.params.id)}),[e,e.match.params.id]);return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Purchase List: ",e.user.name," ")),r.a.createElement(qe.a,{className:"table",dataSource:e.currentUserPurchaseHistory&&e.currentUserPurchaseHistory.reverse(),columns:[{title:"Date",dataIndex:"date",key:"date"},{title:"Name",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Amount",key:function(e){return"data.amount"+e.quantity},render:function(e){return e.amount*e.quantity}}],pagination:{defaultPageSize:5}}),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back"))})),$e=l()(),Je=function(){return r.a.createElement(i.d,{history:$e},r.a.createElement("div",null,r.a.createElement(i.e,null,r.a.createElement(ne,{path:"/",component:Z,exact:!0}),r.a.createElement(ae,{path:"/admin",component:ie}),r.a.createElement(ae,{path:"/dashboard",component:j}),r.a.createElement(ae,{path:"/user",component:Ee}),r.a.createElement(ae,{path:"/create",component:x}),r.a.createElement(ae,{path:"/addUser",component:V}),r.a.createElement(ae,{path:"/manageWallet",component:Oe}),r.a.createElement(ae,{path:"/manageAdminWallet",component:De}),r.a.createElement(ae,{path:"/payAdminWallet",component:Me}),r.a.createElement(ae,{path:"/adminCashOutHistory",component:Ye}),r.a.createElement(ae,{path:"/userPaymentHistory/:id",component:Fe}),r.a.createElement(ae,{path:"/userPurchaseHistory/:id",component:ze}),r.a.createElement(ae,{path:"/pay/:id",component:ke}),r.a.createElement(ae,{path:"/edit/:id",component:Q}),r.a.createElement(i.c,{component:X}))))},Ve=a(73),Ke=a(264),Qe=a.n(Ke),Xe=a(49);function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var tt=[],at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT":return[].concat(Object(Xe.a)(e),[t.product]);case"REMOVE_PRODUCT":return e.filter((function(e){return e.id!==t.id}));case"EDIT_PRODUCT":return e.map((function(e){return e.id===t.id?et({},e,{},t.updates):e}));case"SET_PRODUCTS":return t.products;default:return e}};function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot={text:"",sortBy:"date",startDate:oe()().startOf("month"),endDate:oe()().endOf("month")},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return rt({},e,{text:t.text});case"SORT_BY_AMOUNT":return rt({},e,{sortBy:"amount"});case"SORT_BY_DATE":return rt({},e,{sortBy:"date"});case"SET_START_DATE":return rt({},e,{startDate:t.startDate});case"SET_END_DATE":return rt({},e,{endDate:t.endDate});default:return e}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid,email:t.email,name:t.name};case"LOGOUT":return{};default:return e}};function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var lt=[],mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return[].concat(Object(Xe.a)(e),[t.user]);case"EDIT_USER":case"PAY":return e.map((function(e){return e.id===t.id?ut({},e,{},t.updates):e}));case"SET_USERS":return t.users;case"ADD_AMOUNT":return e.map((function(e){return e.id===t.id?ut({},e,{},t.updates):e}));default:return e}};function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ht=[],ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAY_ADMIN":case"ADD_AMOUNT_ADMIN":return pt({},e,{},t.updates);case"SET_ADMIN":return pt({},e,{},t.admin);default:return e}},bt=[],yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_HISTORY":t.payment;return[].concat(Object(Xe.a)(e),[t.payment]);case"SET_ADMIN_HISTORY":return t.payment;default:return e}},Et=[],vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_PAYMENT_HISTORY":return[].concat(Object(Xe.a)(e),[t.payment]);case"SET_USER_PAYMENT_HISTORY":return t.payment;default:return e}},Ot=[],gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_PURCHASE_HISTORY":return[].concat(Object(Xe.a)(e),[t.purchase]);case"SET_USER_PURCHASE_HISTORY":return t.purchase;default:return e}},jt=[],Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER_PAYMENT_HISTORY":return t.payment;default:return e}},Nt=[],St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER_PURCHASE_HISTORY":return t.purchase;default:return e}},_t=Ve.d,wt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function kt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ct=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{className:"loader__image",src:"/images/loader.gif"}))},Dt=(a(505),a(506),Object(Ve.e)(Object(Ve.c)({products:at,filters:ct,auth:st,users:mt,admin:ft,adminHistory:yt,userPaymentHistory:vt,userPurchaseHistory:gt,currentUserHistory:Pt,currentUserPurchaseHistory:St}),_t(Object(Ve.a)(Qe.a)))),At=r.a.createElement(s.a,{store:Dt},r.a.createElement(Je,null)),Ut=!1,Tt=function(){Ut||(Dt.dispatch(O()),Dt.dispatch(R()),Dt.dispatch((function(e,t){return t().auth.uid,p.ref("admin").once("value").then((function(t){e(function(e){return{type:"SET_ADMIN",admin:e}}(t.val()))}))})),Dt.dispatch(Ie()),Dt.dispatch(_e()),c.a.render(At,document.getElementById("app")),Ut=!0)};c.a.render(r.a.createElement(Ct,null),document.getElementById("app")),d.auth().onAuthStateChanged((function(e){e?(Dt.dispatch(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.auth().currentUser.email,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.auth().currentUser.displayName;return{type:"LOGIN",uid:e,email:t,name:a}}(e.uid)),Dt.dispatch(O()),Dt.dispatch(R()).then((function(){Tt(),"/"===$e.location.pathname&&$e.push("/dashboard")}))):(Dt.dispatch({type:"LOGOUT"}),Tt(),$e.push("/"))})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");wt?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):kt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):kt(t,e)}))}}()}},[[269,1,2]]]);
//# sourceMappingURL=main.71a7bd22.chunk.js.map