(this.webpackJsonpfoodcount_pwa=this.webpackJsonpfoodcount_pwa||[]).push([[0],{268:function(e,t,a){e.exports=a(506)},407:function(e,t,a){},504:function(e,t,a){},506:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),s=a(13),i=a(10),u=a(257),l=a.n(u),m=a(22),d=(a(98),a(95));d.initializeApp({apiKey:"AIzaSyCzFkfDGy0EfakSGY64GnvFhnHEqS_jW8c",authDomain:"foodcount-7d19e.firebaseapp.com",databaseURL:"https://foodcount-7d19e-default-rtdb.firebaseio.com",projectId:"foodcount-7d19e",storageBucket:"foodcount-7d19e.appspot.com",messagingSenderId:"740771838193",appId:"1:740771838193:web:cdb175252d422067559150",measurementId:"G-F3PRBGZN2M"});var p=d.database(),h=new d.auth.GoogleAuthProvider,f=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,n){return(a[e]<n[e]?-1:a[e]>n[e]?1:0)*t}},b=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())};function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=function(){return function(e,t){t().auth.uid;return p.ref("users").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(E({id:e.key},e.val()))})),e(function(e){return{type:"SET_USERS",users:e}}(a.sort(f("name"))))}))}},O=function(e){return function(t,a){var n=a().auth.uid;return p.ref("users/".concat(n)).update(e).then((function(){t(function(e,t){return{type:"EDIT_USER",id:e,updates:t}}(n,e))}))}},g=Object(s.b)((function(e,t){return{user:e.users.find((function(t){return t.id===e.auth.uid})),auth:e.auth}}),(function(e){return{startEditUser:function(t){return e(O(t))},startSetUsers:function(){return e(v())}}}))((function(e){return function(){if(!e.user){var t={name:e.auth.name};e.startEditUser(t),e.startSetUsers()}}(),r.a.createElement("div",null,e.user&&r.a.createElement("div",{className:"dashboard-btn"},1==e.user.admin&&r.a.createElement("button",{className:"buttonAdmin",onClick:function(){qe.push("/admin")}}," Admin "),r.a.createElement("button",{className:"buttonUser",onClick:function(){qe.push("/user")}}," Buy")),r.a.createElement("button",{className:"buttonProfile",onClick:function(){qe.push("/addUser")}}," Manage Profile"))})),j=a(23),P=a(24),N=a(26),S=a(25),_=a(27),w=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onImageChange=function(e){var t=e.target.value;a.setState((function(){return{image:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{amount:t}}))},a.onSubmit=function(e){e.preventDefault(),a.state.name&&a.state.amount?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name,amount:a.state.amount,image:a.state.image?a.state.image:""})):a.setState((function(){return{error:"Please provide name and amount."}}))},a.state={name:e.product?e.product.name:"",image:e.product?e.product.image:"",amount:e.product?e.product.amount.toString():"",error:""},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:this.state.name,onChange:this.onNameChange}),r.a.createElement("input",{type:"text",placeholder:"Amount",className:"text-input",value:this.state.amount,onChange:this.onAmountChange}),r.a.createElement("input",{type:"text",placeholder:"Paste Image url",className:"text-input",value:this.state.image,onChange:this.onImageChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button"},"Save Product"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),k=Object(i.f)(w);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){return{type:"ADD_PRODUCT",product:e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_PRODUCT",id:t}},T=function(){return function(e,t){t().auth.uid;return p.ref("products").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(D({id:e.key},e.val()))})),e(function(e){return{type:"SET_PRODUCTS",products:e}}(a.sort(f("name"))))}))}},H=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startAddProduct(e),a.props.history.push("/admin")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Add Product"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(k,{onSubmit:this.onSubmit})))}}]),t}(r.a.Component),R=Object(s.b)(void 0,(function(e){return{startAddProduct:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,a){a().auth.uid;var n=e.name,r=void 0===n?"":n,c=e.amount,o=void 0===c?0:c,s=e.image,i={name:r,amount:o,image:void 0===s?"":s};return p.ref("products").push(i).then((function(e){t(A(D({id:e.key},i)))}))}}(t))}}}))(H),I=a(54),x=a(9),M=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onSubmit=function(e){e.preventDefault(),a.state.name?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name})):a.setState((function(){return{error:"Please provide name ."}}))},a.state={name:e.user?e.user.name:"",error:""},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",className:"text-input",value:this.state.name,onChange:this.onNameChange}),r.a.createElement("div",null,r.a.createElement(I.a,{type:"danger",onClick:function(){e.props.history.goBack()}}," ",r.a.createElement(x.a,{type:"left"}),"Back")," ",r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Save")))}}]),t}(r.a.Component),B=Object(i.f)(M),Y=a(21),W=a.n(Y),L=a(511),G=a(87),F=a(47),q=a(508),z=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditUser(e),a.props.startSetUsers(),L.a.success("Profile has been updated successfully")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;this.props.auth;return r.a.createElement("div",null,r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Profile"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(B,{user:this.props.existingUser,onSubmit:this.onSubmit})),r.a.createElement("div",{className:"show-for-desktop",style:{background:"#ECECEC",padding:"30px"}},r.a.createElement(G.a,{gutter:16},r.a.createElement(F.a,{span:8},r.a.createElement(q.a,{title:"Total Cost",bordered:!1},"\u09f3",W()(this.props.existingUser.amount).format("0,0.00"))),r.a.createElement(F.a,{span:8},r.a.createElement(q.a,{title:"Total Paid",bordered:!1},"\u09f3",W()(this.props.existingUser.paid).format("0,0.00"))),r.a.createElement(F.a,{span:8},r.a.createElement(q.a,{title:"Total Due",bordered:!1},"\u09f3",W()(this.props.existingUser.amount-(this.props.existingUser.paid?this.props.existingUser.paid:0)).format("0,0.00"))))),r.a.createElement("div",{className:"show-for-mobile "},r.a.createElement("div",{className:" list-item-wallet"},r.a.createElement("h2",{className:"list-item__data"},"Total Cost: \u09f3",W()(this.props.existingUser.amount).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Total Paid: \u09f3",W()(this.props.existingUser.paid).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Total Due: \u09f3",W()(this.props.existingUser.amount-(this.props.existingUser.paid?this.props.existingUser.paid:0)).format("0,0.00")))),r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement("br",null),r.a.createElement(I.a,{type:"primary",onClick:function(){e.props.history.push("/userPaymentHistory/".concat(e.props.existingUser.id))}},"Payment History"),"  ",r.a.createElement(I.a,{type:"primary",onClick:function(){e.props.history.push("/userPurchaseHistory/".concat(e.props.existingUser.id))}},"Purchase History")),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement("br",null),r.a.createElement(G.a,{gutter:[40,24]},r.a.createElement(F.a,{span:12,offset:7},r.a.createElement(I.a,{type:"primary",onClick:function(){e.props.history.push("/userPaymentHistory/".concat(e.props.existingUser.id))}},"Payment History"),"  ",r.a.createElement(I.a,{type:"primary",onClick:function(){e.props.history.push("/userPurchaseHistory/".concat(e.props.existingUser.id))}},"Purchase History"))))))}}]),t}(r.a.Component),$=Object(s.b)((function(e,t){return{existingUser:e.users.find((function(t){return t.id===e.auth.uid})),auth:e.auth}}),(function(e){return{startEditUser:function(t){return e(O(t))},startSetUsers:function(){return e(v())}}}))(z),J=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditProduct(a.props.product.id,e),a.props.history.push("/admin")},a.onRemove=function(){a.props.startRemoveProduct({id:a.props.product.id}),a.props.history.push("/admin")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Edit Product"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(k,{product:this.props.product,onSubmit:this.onSubmit}),r.a.createElement("button",{className:"button button--secondary",onClick:this.onRemove},"Remove Product")))}}]),t}(r.a.Component),V=Object(s.b)((function(e,t){return{product:e.products.find((function(e){return e.id===t.match.params.id}))}}),(function(e,t){return{startEditProduct:function(t,a){return e(function(e,t){return function(a,n){n().auth.uid;return p.ref("products/".concat(e)).update(t).then((function(){a(function(e,t){return{type:"EDIT_PRODUCT",id:e,updates:t}}(e,t))}))}}(t,a))},startRemoveProduct:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return function(e,a){a().auth.uid;return p.ref("products/".concat(t)).remove().then((function(){e(U({id:t}))}))}}(t))}}}))(J),K=function(){return r.a.createElement("div",null,"404 - ",r.a.createElement(i.a,{to:"/"},"Go home"))},Q=Object(s.b)(void 0,(function(e){return{startLogin:function(){return e((function(){return d.auth().signInWithPopup(h)}))}}}))((function(e){var t=e.startLogin;return r.a.createElement("div",{className:"box-layout"},r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"box-layout__title"},"Food Count"),r.a.createElement("p",null,"Let's Eat."),r.a.createElement("button",{className:"button",onClick:t},"Login with Google")))})),X=a(133),Z=(a(407),Object(s.b)(void 0,(function(e){return{startLogout:function(){return e((function(){return d.auth().signOut()}))}}}))((function(e){var t=e.startLogout;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"header__content"},r.a.createElement(i.a,{className:"header__title",to:"/dashboard"},r.a.createElement("h2",{className:"text-white h2 mb-0"},"Food Count")),r.a.createElement("button",{className:"button button--link",onClick:t},"Logout"))))}))),ee=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(X.a)(e,["isAuthenticated","component"]);return r.a.createElement(i.c,Object.assign({},n,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(a,e)):r.a.createElement(i.b,{to:"/"})}}))})),te=Object(s.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(X.a)(e,["isAuthenticated","component"]);return r.a.createElement(i.c,Object.assign({},n,{component:function(e){return t?r.a.createElement(i.b,{to:"/dashboard"}):r.a.createElement(a,e)}}))})),ae=a(71),ne=a.n(ae),re=function(e){var t=e.id,a=e.name,n=e.amount;return r.a.createElement(i.a,{className:"list-item",to:"/edit/".concat(t)},r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item__title"},a)),r.a.createElement("h3",{className:"list-item__data"},"\u09f3",W()(n).format("0,0.00")))},ce=Object(s.b)((function(e){return{products:e.products,name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Products"),r.a.createElement("div",{className:"show-for-desktop"},"Product"),r.a.createElement("div",{className:"show-for-desktop"},"Amount")),r.a.createElement("div",{className:"list-body"},0===e.products.length?r.a.createElement("div",{className:"list-item list-item--message"},r.a.createElement("span",null,"No products")):e.products.map((function(e){return r.a.createElement(re,Object.assign({key:e.id},e))}))))})),oe=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header__actions"},r.a.createElement(i.a,{className:"button",to:"/create"},"Add Product"),r.a.createElement(i.a,{className:"button",to:"/manageWallet"},"Manage Wallet"),r.a.createElement(i.a,{className:"button",to:"/manageAdminWallet"},"Admin Wallet")),r.a.createElement(ce,null),r.a.createElement("div",{className:"content-container"},r.a.createElement(I.a,{type:"danger",onClick:function(){e.history.goBack()}},r.a.createElement(x.a,{type:"left"}),"Back")))},se=a(86);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le=function(e,t){return{type:"ADD_USER_PURCHASE_HISTORY",id:e,Purchase:t}},me=a(509),de=q.a.Meta,pe=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this))).addCart=function(){a.setState((function(e,t){return{cart:e.cart+1}}))},a.removeCart=function(){a.state.cart>1&&a.setState((function(e,t){return{cart:e.cart-1}}))},a.addAmount=function(){var e=new Date,t=1*a.props.user.amount?1*a.props.user.amount:"0",n={amount:parseInt(t)+parseInt(a.props.amount)*a.state.cart};a.props.startEditUser(n),a.props.startAddUserPurchaseHistory(a.props.user.id,{name:a.props.name,amount:a.props.amount,quantity:a.state.cart,date:b(e)}),a.closeModal(),L.a.success("Product has been purchased successfully")},a.state={modalIsOpen:!1,cart:1},a.openModal=a.openModal.bind(Object(se.a)(a)),a.afterOpenModal=a.afterOpenModal.bind(Object(se.a)(a)),a.closeModal=a.closeModal.bind(Object(se.a)(a)),a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){this.subtitle.style.color="#000"}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1}),this.state.cart&&this.setState((function(e,t){return{cart:1}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement(F.a,{span:24},r.a.createElement(q.a,{bordered:!0,style:{height:300},cover:r.a.createElement("img",{alt:"example",src:this.props.image?this.props.image:"https://www.ukmarket.in/sites/default/files/styles/large/public/default_images/default-product.jpg?itok=Ptm5dtOz",height:"200"}),actions:[r.a.createElement("button",{style:{color:"red"},className:"list-item-button ",onClick:this.openModal}," ",r.a.createElement(x.a,{type:"shopping-cart"})," Buy Now ")]},r.a.createElement(de,{title:this.props.name,description:W()(this.props.amount).format("\u200e0,0.00")})))),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement(F.a,{span:8},r.a.createElement(q.a,{bordered:!0,style:{height:300},cover:r.a.createElement("img",{alt:"example",src:this.props.image?this.props.image:"https://www.ukmarket.in/sites/default/files/styles/large/public/default_images/default-product.jpg?itok=Ptm5dtOz",height:"200"}),actions:[r.a.createElement("button",{style:{color:"red"},className:"list-item-button ",onClick:this.openModal}," ",r.a.createElement(x.a,{type:"shopping-cart"})," Buy Now ")]},r.a.createElement(de,{title:this.props.name,description:W()(this.props.amount).format("\u200e0,0.00")})))),r.a.createElement(me.a,{title:"Buy this product",visible:this.state.modalIsOpen,onOk:this.addAmount,onCancel:this.closeModal,width:"80%",footer:!1},r.a.createElement("div",{className:"show-for-mobile"},r.a.createElement("div",{className:"cart_subtitle"},r.a.createElement("h2",{ref:function(t){return e.subtitle=t}},this.props.name)),r.a.createElement("div",{className:"price-div"},"Price:",this.props.amount," bdt"),r.a.createElement("div",{className:"cost-div"},"Total Cost:",parseInt(this.props.amount)*this.state.cart," bdt"),r.a.createElement("div",{className:"quantity"},r.a.createElement("span",null,r.a.createElement("button",{className:"removeCart",onClick:this.removeCart},"-")),r.a.createElement("span",{className:"box-item"},this.state.cart),r.a.createElement("span",null,r.a.createElement("button",{className:"addCart",onClick:this.addCart},"+"))),r.a.createElement("br",null),r.a.createElement("button",{className:"cancelButton",onClick:this.closeModal},"close"),r.a.createElement("button",{className:"purchaseButton",disabled:this.state.cart<1,onClick:this.addAmount},"Purchase")),r.a.createElement("div",{className:"show-for-desktop"},r.a.createElement(G.a,{gutter:[40,24]},r.a.createElement(F.a,{span:8,offset:8},r.a.createElement(q.a,{title:"Purchase"},r.a.createElement("div",{className:"cart_subtitle"},r.a.createElement("h2",{ref:function(t){return e.subtitle=t}},this.props.name)),r.a.createElement("div",{className:"price-div"},"Price:",this.props.amount," bdt"),r.a.createElement("div",{className:"cost-div"},"Total Cost:",parseInt(this.props.amount)*this.state.cart," bdt"),r.a.createElement("div",{className:"quantity"},r.a.createElement("span",null,r.a.createElement("button",{className:"removeCart",onClick:this.removeCart},"-")),r.a.createElement("span",{className:"box-item"},this.state.cart),r.a.createElement("span",null,r.a.createElement("button",{className:"addCart",onClick:this.addCart},"+"))),r.a.createElement("br",null)))),r.a.createElement(G.a,{gutter:[40,24]},r.a.createElement(F.a,{span:8,offset:10},r.a.createElement(I.a,{type:"danger",onClick:this.closeModal},"close")," "," ",r.a.createElement(I.a,{type:"primary",disabled:this.state.cart<1,onClick:this.addAmount},"Purchase"))))))}}]),t}(r.a.Component),he=Object(s.b)((function(e,t){return{user:e.users.find((function(t){return t.id===e.auth.uid}))}}),{startEditUser:O,startAddUserPurchaseHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var r=t.date,c=void 0===r?"":r,o=t.amount,s=void 0===o?0:o,i=t.name,u=void 0===i?"":i,l=t.quantity,m={date:c,amount:s,name:u,quantity:void 0===l?0:l};return p.ref("userPurchaseHistory/".concat(e)).push(m).then((function(e){a(le(ue({},m)))}))}}})(pe),fe=Object(i.f)(Object(s.b)((function(e){return{products:e.products,user:e.users.find((function(t){return t.id===e.auth.uid})),name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Total Cost : ",(e.user.amount?e.user.amount:0)-(e.user.paid?e.user.paid:0)," "),r.a.createElement("div",{className:"show-for-desktop"},"Total Cost :"),r.a.createElement("div",{className:"show-for-desktop"},(e.user.amount?e.user.amount:0)-(e.user.paid?e.user.paid:0))),r.a.createElement("div",{className:"list-body"},r.a.createElement("br",null),0===e.products.length?r.a.createElement("div",{className:"list-item"},r.a.createElement("span",null,"No products")):r.a.createElement(G.a,{gutter:[40,24]},e.products.map((function(e){return r.a.createElement(he,Object.assign({key:e.id},e))}))),r.a.createElement(I.a,{type:"danger",onClick:function(){e.history.goBack()}},r.a.createElement(x.a,{type:"left"}),"Back")))}))),be=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header__actions"}),r.a.createElement(fe,null))},ye=function(e){var t=e.id,a=e.name,n=e.amount,c=e.paid;return r.a.createElement(i.a,{className:"list-item-user",to:"/pay/".concat(t)},r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item-user__title"},a)),r.a.createElement("h5",{className:"list-item-user__data"},"Total Cost: \u09f3",W()(n).format("0,0.00")),r.a.createElement("h5",{className:"list-item-user__data"},"Total Paid: \u09f3",W()(c).format("0,0.00")),r.a.createElement("h5",{className:"list-item-user__data"},"Total Due: \u09f3",W()(n-(c||0)).format("0,0.00")))},Ee=Object(s.b)((function(e){return{users:e.users,name:e}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Users List ")),r.a.createElement("div",{className:"list-body"},0===e.users.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No User")):e.users.map((function(e){return r.a.createElement(ye,Object.assign({key:e.id},e))})),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back")))})),ve=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{newPaid:t}}))},a.onSubmit=function(e){e.preventDefault();var t=parseInt(a.state.paid)+parseInt(a.state.newPaid);a.state.newPaid?(a.setState((function(){return{error:""}})),a.props.onSubmit({name:a.state.name,amount:a.state.amount,paid:t},a.state.newPaid)):a.setState((function(){return{error:"Please provide amount."}}))},a.state={name:e.user?e.user.name:"",amount:e.user&&e.user.amount?e.user.amount.toString():0,paid:e.user&&e.user.paid?e.user.paid.toString():0,newPaid:"",error:""},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:this.state.name,onChange:this.onNameChange,disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:"Due: "+(parseInt(this.state.amount)-parseInt(this.state.paid))+" bdt",disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"type amount to pay",className:"text-input",value:this.state.newPaid,onChange:this.onAmountChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button-save"},"Proceed Payment"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),Oe=Object(i.f)(ve);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pe=function(e){return{type:"ADD_USER_PAYMENT_HISTORY",payment:e}},Ne=function(){return function(e,t){t().auth.uid;return p.ref("userPaymentHistory").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(je({id:e.key},e.val()))})),e({type:"SET_USER_PAYMENT_HISTORY",payment:a})}))}},Se=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e,t){var n=new Date;a.props.startPay(a.props.user.id,e),a.props.startAdminAddAmount({cash:parseInt(a.props.admin.cash?a.props.admin.cash:0)+parseInt(t)}),a.props.startAddUserPaymentHistory(a.props.user.id,{date:b(n),amount:t}),a.props.startSetUserPaymentHistory(),L.a.success("Payment successful"),a.props.history.push("/manageWallet")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Payment Page "))),r.a.createElement("div",{className:"content-container"},r.a.createElement(Oe,{user:this.props.user,onSubmit:this.onSubmit}),r.a.createElement(i.a,{className:"button ",to:"/userPaymentHistory/".concat(this.props.user.id)},"Payment History"),r.a.createElement(i.a,{className:"button ",to:"/userPurchaseHistory/".concat(this.props.user.id)},"Purchase History")))}}]),t}(r.a.Component),_e=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),admin:e.admin}}),{startPay:function(e,t){return function(a,n){return p.ref("users/".concat(e)).update(t).then((function(){a(function(e,t){return{type:"PAY",id:e,updates:t}}(e,t))}))}},startAdminAddAmount:function(e){return function(t,a){return p.ref("admin/").update(e).then((function(){t(function(e){return{type:"ADD_AMOUNT_ADMIN",updates:e}}(e))}))}},startAddUserPaymentHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var r=t.date,c=void 0===r?"":r,o=t.amount,s={date:c,amount:void 0===o?0:o};return p.ref("userPaymentHistory/".concat(e)).push(s).then((function(e){a(Pe(je({},s)))}))}},startSetUserPaymentHistory:Ne})(Se),we=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.startEditUser(e),a.props.startSetUsers(),a.props.history.push("/dashboard")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Profile"))),r.a.createElement("div",{className:"list-item-wallet"},r.a.createElement("h2",{className:"list-item__data"},"Payment : \u09f3",W()(this.props.admin.cash).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Withdrawal: \u09f3",W()(this.props.admin.paid).format("0,0.00")),r.a.createElement("h2",{className:"list-item__data"},"Cash: \u09f3",W()(this.props.admin.cash-(this.props.admin.paid?this.props.admin.paid:0)).format("0,0.00"))),r.a.createElement("div",null,r.a.createElement(i.a,{className:"button",to:"/payAdminWallet"},"Withdraw"),r.a.createElement(i.a,{className:"button",to:"/adminCashOutHistory"},"Withdrawal History"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),ke=Object(s.b)((function(e,t){return{admin:e.admin}}),(function(e){return{}}))(we),Ce=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).onNameChange=function(e){var t=e.target.value;a.setState((function(){return{name:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{newPaid:t}}))},a.onSubmit=function(e){e.preventDefault();var t=parseInt(a.props.admin.paid?a.props.admin.paid:0)+parseInt(a.state.newPaid);a.state.newPaid?(a.setState((function(){return{error:""}})),a.props.onSubmit({paid:t},a.state.newPaid)):a.setState((function(){return{error:"Please provide name and amount."}}))},a.state={cash:e.admin&&e.admin.cash?e.admin.cash.toString():0,paid:e.admin&&e.admin.paid?e.admin.paid.toString():0,newPaid:"",error:""},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},this.state.error&&r.a.createElement("p",{className:"form__error"},this.state.error),r.a.createElement("input",{type:"text",placeholder:"Name",autoFocus:!0,className:"text-input",value:"Cash: "+(parseInt(this.props.admin.cash?this.props.admin.cash:0)-parseInt(this.props.admin.paid?this.props.admin.paid:0))+" bdt",disabled:!0}),r.a.createElement("input",{type:"text",placeholder:"type amount to pay",className:"text-input",value:this.state.newPaid,onChange:this.onAmountChange}),r.a.createElement("div",null,r.a.createElement("button",{className:"button-save"},"Proceed Payment"),r.a.createElement("button",{className:"button-red",onClick:function(){e.props.history.goBack()}},"Back")))}}]),t}(r.a.Component),De=Object(i.f)(Ce);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Te=function(e){return{type:"ADD_HISTORY",payment:e}},He=function(){return function(e,t){t().auth.uid;return p.ref("adminHistory").once("value").then((function(t){var a=[];t.forEach((function(e){a.push(Ue({id:e.key},e.val()))})),e({type:"SET_ADMIN_HISTORY",payment:a})}))}},Re=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e,t){var n=new Date;a.props.startAdminAddHistoryAmount({date:b(n),amount:t}),a.props.startAdminPay(e),a.props.startSetAdminHistory(),L.a.success("Withdrawn Successful"),a.props.history.push("/manageAdminWallet")},a}return Object(_.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Payment Page "))),r.a.createElement("div",{className:"content-container"},r.a.createElement(De,{admin:this.props.admin,onSubmit:this.onSubmit})))}}]),t}(r.a.Component),Ie=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),admin:e.admin}}),{startAdminAddHistoryAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,a){var n=e.date,r=void 0===n?"":n,c=e.amount,o={date:r,amount:void 0===c?0:c};return p.ref("adminHistory").push(o).then((function(e){t(Te(Ue({},o)))}))}},startAdminPay:function(e){return function(t,a){return p.ref("admin/").update(e).then((function(){t(function(e){return{type:"PAY_ADMIN",updates:e}}(e))}))}},startSetAdminHistory:He})(Re),xe=function(e){e.id;var t=e.amount,a=e.date;return r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," ",a),r.a.createElement("h5",{className:"list-item__data"},"\u09f3",W()(t).format("0,0.00")))},Me=Object(s.b)((function(e){return{adminHistory:e.adminHistory}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Date"),r.a.createElement("h5",{className:"list-item__data"},"Amount")),r.a.createElement("div",{className:"list-body scrollable"},0===e.adminHistory.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No History")):e.adminHistory.map((function(e){return r.a.createElement(xe,Object.assign({key:e.id},e))}))),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back"))})),Be=function(e){e.id;var t=e.amount,a=e.date;return r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," ",a),r.a.createElement("h5",{className:"list-item__data"},"\u09f3",W()(t).format("0,0.00")))};function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var We=Object(s.b)((function(e,t){return{currentUserHistory:e.currentUserHistory,id:t.match.params.id}}),{startSetCurrentUserPaymentHistory:function(e){return function(t,a){return p.ref("userPaymentHistory/".concat(e)).once("value").then((function(e){var a=[];e.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.key},e.val()))})),t({type:"SET_CURRENT_USER_PAYMENT_HISTORY",payment:a})}))}}})((function(e){return Object(n.useEffect)((function(){e.match.params.id&&e.startSetCurrentUserPaymentHistory(e.match.params.id)}),[e.match.params.id]),r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Date"),r.a.createElement("h5",{className:"list-item__data"},"Amount")),r.a.createElement("div",{className:"list-body"},0===e.currentUserHistory.length?r.a.createElement("div",{className:"list-item-user list-item--message"},r.a.createElement("span",null,"No History")):e.currentUserHistory.map((function(e){return r.a.createElement(Be,Object.assign({key:e.id},e))})),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back")))}));function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ge=a(507),Fe=Object(s.b)((function(e,t){return{user:e.users.find((function(e){return e.id===t.match.params.id})),currentUserPurchaseHistory:e.currentUserPurchaseHistory,id:t.match.params.id}}),{startSetCurrentUserPurchaseHistory:function(e){return function(t,a){return p.ref("userPurchaseHistory/".concat(e)).once("value").then((function(e){var a=[];e.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.key},e.val()))})),t({type:"SET_CURRENT_USER_PURCHASE_HISTORY",purchase:a})}))}}})((function(e){Object(n.useEffect)((function(){e.match.params.id&&e.startSetCurrentUserPurchaseHistory(e.match.params.id)}),[e,e.match.params.id]);return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-item"},r.a.createElement("h5",{className:"list-item__data"}," Purchase List: ",e.user.name," ")),r.a.createElement(Ge.a,{className:"table",dataSource:e.currentUserPurchaseHistory&&e.currentUserPurchaseHistory.reverse(),columns:[{title:"Date",dataIndex:"date",key:"date"},{title:"Name",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Amount",key:function(e){return"data.amount"+e.quantity},render:function(e){return e.amount*e.quantity}}],pagination:{defaultPageSize:5}}),r.a.createElement("button",{className:"button-red",onClick:function(){e.history.goBack()}},"Back"))})),qe=l()(),ze=function(){return r.a.createElement(i.d,{history:qe},r.a.createElement("div",null,r.a.createElement(i.e,null,r.a.createElement(te,{path:"/",component:Q,exact:!0}),r.a.createElement(ee,{path:"/admin",component:oe}),r.a.createElement(ee,{path:"/dashboard",component:g}),r.a.createElement(ee,{path:"/user",component:be}),r.a.createElement(ee,{path:"/create",component:R}),r.a.createElement(ee,{path:"/addUser",component:$}),r.a.createElement(ee,{path:"/manageWallet",component:Ee}),r.a.createElement(ee,{path:"/manageAdminWallet",component:ke}),r.a.createElement(ee,{path:"/payAdminWallet",component:Ie}),r.a.createElement(ee,{path:"/adminCashOutHistory",component:Me}),r.a.createElement(ee,{path:"/userPaymentHistory/:id",component:We}),r.a.createElement(ee,{path:"/userPurchaseHistory/:id",component:Fe}),r.a.createElement(ee,{path:"/pay/:id",component:_e}),r.a.createElement(ee,{path:"/edit/:id",component:V}),r.a.createElement(i.c,{component:K}))))},$e=a(73),Je=a(263),Ve=a.n(Je),Ke=a(49);function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ze=[],et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT":return[].concat(Object(Ke.a)(e),[t.product]);case"REMOVE_PRODUCT":return e.filter((function(e){return e.id!==t.id}));case"EDIT_PRODUCT":return e.map((function(e){return e.id===t.id?Xe({},e,{},t.updates):e}));case"SET_PRODUCTS":return t.products;default:return e}};function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nt={text:"",sortBy:"date",startDate:ne()().startOf("month"),endDate:ne()().endOf("month")},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return at({},e,{text:t.text});case"SORT_BY_AMOUNT":return at({},e,{sortBy:"amount"});case"SORT_BY_DATE":return at({},e,{sortBy:"date"});case"SET_START_DATE":return at({},e,{startDate:t.startDate});case"SET_END_DATE":return at({},e,{endDate:t.endDate});default:return e}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid,email:t.email,name:t.name};case"LOGOUT":return{};default:return e}};function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var it=[],ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return[].concat(Object(Ke.a)(e),[t.user]);case"EDIT_USER":case"PAY":return e.map((function(e){return e.id===t.id?st({},e,{},t.updates):e}));case"SET_USERS":return t.users;case"ADD_AMOUNT":return e.map((function(e){return e.id===t.id?st({},e,{},t.updates):e}));default:return e}};function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function mt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var dt=[],pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAY_ADMIN":case"ADD_AMOUNT_ADMIN":return mt({},e,{},t.updates);case"SET_ADMIN":return mt({},e,{},t.admin);default:return e}},ht=[],ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_HISTORY":t.payment;return[].concat(Object(Ke.a)(e),[t.payment]);case"SET_ADMIN_HISTORY":return t.payment;default:return e}},bt=[],yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_PAYMENT_HISTORY":return[].concat(Object(Ke.a)(e),[t.payment]);case"SET_USER_PAYMENT_HISTORY":return t.payment;default:return e}},Et=[],vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_PURCHASE_HISTORY":return[].concat(Object(Ke.a)(e),[t.purchase]);case"SET_USER_PURCHASE_HISTORY":return t.purchase;default:return e}},Ot=[],gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER_PAYMENT_HISTORY":return t.payment;default:return e}},jt=[],Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER_PURCHASE_HISTORY":return t.purchase;default:return e}},Nt=$e.d,St=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _t(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var wt=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{className:"loader__image",src:"/images/loader.gif"}))},kt=(a(504),a(505),Object($e.e)(Object($e.c)({products:et,filters:rt,auth:ct,users:ut,admin:pt,adminHistory:ft,userPaymentHistory:yt,userPurchaseHistory:vt,currentUserHistory:gt,currentUserPurchaseHistory:Pt}),Nt(Object($e.a)(Ve.a)))),Ct=r.a.createElement(s.a,{store:kt},r.a.createElement(ze,null)),Dt=!1,At=function(){Dt||(kt.dispatch(v()),kt.dispatch(T()),kt.dispatch((function(e,t){return t().auth.uid,p.ref("admin").once("value").then((function(t){e(function(e){return{type:"SET_ADMIN",admin:e}}(t.val()))}))})),kt.dispatch(He()),kt.dispatch(Ne()),o.a.render(Ct,document.getElementById("app")),Dt=!0)};o.a.render(r.a.createElement(wt,null),document.getElementById("app")),d.auth().onAuthStateChanged((function(e){e?(kt.dispatch(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.auth().currentUser.email,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.auth().currentUser.displayName;return{type:"LOGIN",uid:e,email:t,name:a}}(e.uid)),kt.dispatch(v()),kt.dispatch(T()).then((function(){At(),"/"===qe.location.pathname&&qe.push("/dashboard")}))):(kt.dispatch({type:"LOGOUT"}),At(),qe.push("/"))})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");St?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_t(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_t(t,e)}))}}()}},[[268,1,2]]]);
//# sourceMappingURL=main.32eb3220.chunk.js.map